<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Debugging Elasticsearch in Eclipse</title>
    <meta name="description" content="I’m one of those developers that think that debugging an application is a great way of gaining knowledge about its inner workings, not just for finding problems but also for educational purposes. Elasticsearch is one of my favorite open source projects that I sometime have the pleasure of debugging. The Elasticsearch homepage is not that extensive when it comes to building and running Elasticsearch in Eclipse so I’m giving a short description of how it is done...">
    <meta name="author" content="Henrik Lindström">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
    <link href="/assets/twitter/stylesheets/bootstrap.min.css?0.9156424733186974" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/font-awesome.css?0.7555800246241211" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/jquery.tweet.css?0.9229525634646831" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css?0.22824241644485088" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css?0.6606153621693679" type="text/css" rel="stylesheet" media="all">

<script src="/assets/twitter/javascripts/jquery.tweet.js?0.2985310576296799"></script>
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/"><i class="icon-search"></i>&nbsp;a life in search</a>
          <ul class="nav">
              
                <li><a href="/archive">Archive</a></li>
              
                <li><a href="/tags">Tags</a></li>
              
                <li><a href="/categories">Categories</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        <div class="page-header">
  <h1>Debugging Elasticsearch in Eclipse </h1>
</div>

<div class="row">
  <div class="span8">
    <p><span>I’m one of those developers that think that debugging an application is a great way of gaining knowledge about its inner workings, not just for finding problems but also for educational purposes. Elasticsearch is one of my favorite open source projects that I sometime have the pleasure of debugging. The <a href="http://www.elasticsearch.org">Elasticsearch homepage</a> is not that extensive when it comes to building and running Elasticsearch in Eclipse so I’m giving a short description of how it is done.</span></p>

<p><h2>Getting the source code</h2>
<span>There are a number of ways of getting the ES source code from its github repository. Either you can clone the repository directly or fork it (allowing you to commit changes to your forked version) or you can download the zip archive for each released version from the <a href="https://github.com/elasticsearch/elasticsearch/tags">tags section</a>. Either way you should end up with a folder looking like (0.19.x- version):</span></p>

<p><img src="/assets/media/debugging-elasticsearch-in-eclipse/1.png" /></p>

<p><h2>Importing into your Eclipse workspace</h2>
<span>Now it is time to open your Eclipse workspace. To import the ES project select File -&gt; Import and select Existing Maven project as import source:</span></p>

<p><img src="/assets/media/debugging-elasticsearch-in-eclipse/2.png" /></p>

<p><span>Select the root folder of the ES source code, the pom.xml should appear in the projects list, and press finish:</span></p>

<p><img src="/assets/media/debugging-elasticsearch-in-eclipse/3.png" /></p>

<p><span>Note: Eclipse will not copy the directory into the workspace but instead just reference to it. Therefore I usually copy the project into the workspace folder before importing it.</span></p>

<p><h2>The Error</h2>
<span>After importing the project eclipse will load its configuration and BOOOM:
maven-dependency-plugin (goals &quot;copy-dependencies&quot;, &quot;unpack&quot;) is not supported by m2e.
giving you a red x on your project preventing you from building it. The copy-dependencies task is not supported by the m2e plugin but it isn’t needed to build the project either so by adding:</span></p>

<pre>&lt;pluginManagement&gt;
&lt;plugins&gt;
    &lt;!-- Ignore/Execute plugin execution --&gt;
    &lt;plugin&gt;
        &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;
        &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;configuration&gt;
            &lt;lifecycleMappingMetadata&gt;
                &lt;pluginExecutions&gt;
                    &lt;!-- copy-dependency plugin --&gt;
                    &lt;pluginExecution&gt;
                        &lt;pluginExecutionFilter&gt;
                            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
                            &lt;versionRange&gt;[1.0.0,)&lt;/versionRange&gt;
                            &lt;goals&gt;
                                &lt;goal&gt;copy-dependencies&lt;/goal&gt;
                            &lt;/goals&gt;
                        &lt;/pluginExecutionFilter&gt;
                        &lt;action&gt;
                            &lt;ignore /&gt;
                        &lt;/action&gt;
                    &lt;/pluginExecution&gt;
                &lt;/pluginExecutions&gt;
            &lt;/lifecycleMappingMetadata&gt;
        &lt;/configuration&gt;
    &lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/pluginManagement&gt;</pre>

<p><span>into your &lt;build&gt; tag in your pom.xml you can ignore <a href="http://stackoverflow.com/questions/8706017/maven-dependency-plugin-goals-copy-dependencies-unpack-is-not-supported-b">this error</a>. After changing your pom.xml you need to update the maven configuration by right clicking on the projects root folder and Maven -&gt; Update Project Configuration… and click ok in the presented dialog.</span></p>

<p><h2>Building</h2>
<span>So it is time to build the ES source code. Right click on the projects root folder -&gt; Run As -&gt; Maven build… Set ‘package’ as goal and check the skip tests box and click Run:</span></p>

<p><img src="/assets/media/debugging-elasticsearch-in-eclipse/4.png" /></p>

<p><span>Hopefully your console will print out what it is doing during the build ending with:</span></p>

<pre>[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 31.924s
[INFO] Finished at: Tue Jun 19 10:58:40 CEST 2012
[INFO] Final Memory: 25M/745M
[INFO] ------------------------------------------------------------------------</pre>

<p><span>Now you have a built version in the target folder (the default output folder).</span></p>

<p><h2>Running ES</h2>
<span>So to the final step of actually running ES. Locate ElasticSearch.java in org.elasticsearch.bootstrap, or ElasticSearch.java if you don’t want to run ES in the foreground. Right click it and select Run As -&gt; Java Application.</span>
<span>Voila! Now you have ES running in your Eclipse environment and you can you can play with it in your own little sandbox as you please.</span></p>

<pre>[2012-06-19 11:06:03,938][INFO ][node                     ] [Jessica Jones] {0.19.4}[13732]: initializing ...
[2012-06-19 11:06:03,944][INFO ][plugins                  ] [Jessica Jones] loaded [], sites []
[2012-06-19 11:06:05,296][INFO ][node                     ] [Jessica Jones] {0.19.4}[13732]: initialized
[2012-06-19 11:06:05,296][INFO ][node                     ] [Jessica Jones] {0.19.4}[13732]: starting ...
[2012-06-19 11:06:05,372][INFO ][transport                ] [Jessica Jones] bound_address {inet[/0.0.0.0:9301]}, publish_address {inet[/192.168.150.15:9301]}
[2012-06-19 11:06:08,522][INFO ][cluster.service          ] [Jessica Jones] detected_master [Human Robot][V2sqZITgSO26kayUlQs6BQ][inet[/192.168.150.15:9300]], added {[Human Robot][V2sqZITgSO26kayUlQs6BQ][inet[/192.168.150.15:9300]],}, reason: zen-disco-receive(from master [[Human Robot][V2sqZITgSO26kayUlQs6BQ][inet[/192.168.150.15:9300]]])
[2012-06-19 11:06:08,530][INFO ][discovery                ] [Jessica Jones] elasticsearch/1mcX3rqkTL2WdAoEquhLdQ
[2012-06-19 11:06:08,545][INFO ][http                     ] [Jessica Jones] bound_address {inet[/0.0.0.0:9201]}, publish_address {inet[/192.168.150.15:9201]}
[2012-06-19 11:06:08,545][INFO ][node                     ] [Jessica Jones] {0.19.4}[13732]: started</pre>

    
    <div class="pagination">
      <ul>
        <ul>
            <li class="prev disabled"><a>&larr; Previous</a></li>

            <li><a href="/archive">Archive</a></li>

            <li class="next"><a href="/adding-fuzzy-filtering-to-the-episerver-find-fluent-api" title="Adding fuzzy filtering to the EPiServer Find Fluent API">Next &rarr;</a></li>
        </ul>
      </ul>
    </div>
    <hr>
    <div id="disqus_thread"></div>
<script>
    var disqus_developer = 1;
    var disqus_shortname = 'alifeinsearch'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
  
  <div class="span4">
    <h4>By</h4>
    <div><span><a href="https://profiles.google.com/110888837133566849493" target="_blank" rel="me">Henrik Lindström</a></span></div>
    <br>
    <h4>Published</h4>
    <div class="date"><span>2012-08-22</span></div>
    <br>
    <h4>Categories</h4>
    <ul class="tag_box">
      <li>
        <a href="/categories#elasticsearch-ref">elasticsearch <span>2</span></a>
      </li>    </ul>
    <br>
    <h4>Tags</h4>
    <ul class="tag_box">
      <li>
        <a href="/tags#elasticsearch-ref">elasticsearch <span>2</span></a>
      </li>      <li>
        <a href="/tags#debugging-ref">debugging <span>1</span></a>
      </li>      <li>
        <a href="/tags#eclipse-ref">eclipse <span>1</span></a>
      </li>    </ul>
  </div>
</div>

      </div>

      <footer>
        <p>&copy; Henrik Lindström 2012 
          with help from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>, <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
          and <a href="http://fortawesome.github.com/Font-Awesome/" target="_blank">Font Awesome</a>
        </p>
      </footer>

    </div> <!-- /container -->
    
    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    <script>
  var _gaq=[['_setAccount','UA-34278256-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
  </body>
</html>
